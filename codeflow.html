<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CodeFlow Advanced Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, sans-serif;
        margin: 20px;
        background: #f0f4f9;
        color: #333;
      }
      h1 {
        text-align: center;
        margin-bottom: 30px;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
      }
      .card {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
      }
      .card:hover {
        transform: translateY(-3px);
      }
      .badges {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }
      .badge {
        background: linear-gradient(135deg, #fef3c7, #fed7aa);
        padding: 20px;
        text-align: center;
        border-radius: 16px;
        font-size: 16px;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        overflow: hidden;
      }
      .badge:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        border-color: #4a90e2;
      }
      .badge.unlocked {
        background: linear-gradient(135deg, #10b981, #34d399);
        color: white;
        animation: badgeUnlock 0.6s ease-out;
      }
      .badge.legendary {
        background: linear-gradient(135deg, #8b5cf6, #a78bfa);
        color: white;
        box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
      }
      .badge.epic {
        background: linear-gradient(135deg, #f59e0b, #fbbf24);
        color: white;
      }
      .badge-icon {
        font-size: 2rem;
        display: block;
        margin-bottom: 8px;
        animation: pulse 2s infinite;
      }
      .badge-title {
        font-weight: bold;
        font-size: 0.9rem;
        margin-bottom: 5px;
      }
      .badge-description {
        font-size: 0.75rem;
        opacity: 0.8;
        margin-bottom: 10px;
      }
      .progress {
        height: 12px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        margin-top: 10px;
        overflow: hidden;
        position: relative;
      }
      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #4a90e2, #67c1f5);
        border-radius: 8px;
        transition: width 0.8s ease-out;
        position: relative;
        overflow: hidden;
      }
      .progress-bar::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmer 2s infinite;
      }
      .badge-level {
        position: absolute;
        top: 5px;
        right: 5px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border-radius: 12px;
        padding: 2px 8px;
        font-size: 0.7rem;
        font-weight: bold;
      }
      .badge-tooltip {
        position: absolute;
        bottom: 110%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 0.8rem;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s;
        z-index: 1000;
      }
      .badge:hover .badge-tooltip {
        opacity: 1;
      }
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #10b981, #34d399);
        color: white;
        padding: 15px 20px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        transform: translateX(400px);
        transition: transform 0.5s ease;
        z-index: 1001;
      }
      .notification.show {
        transform: translateX(0);
      }
      @keyframes badgeUnlock {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }
      @keyframes shimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }
      @keyframes sparkle {
        0%,
        100% {
          opacity: 0;
          transform: scale(0);
        }
        50% {
          opacity: 1;
          transform: scale(1);
        }
      }
      button,
      input[type="text"],
      input[type="checkbox"] {
        padding: 10px 15px;
        border-radius: 8px;
        border: 1px solid #ccc;
        cursor: pointer;
        font-size: 14px;
      }
      button {
        background: linear-gradient(90deg, #4a90e2, #67c1f5);
        color: white;
        border: none;
      }
      button:hover {
        opacity: 0.9;
      }
      .status {
        margin-top: 10px;
        font-weight: bold;
      }
      .sync-on {
        color: green;
      }
      .sync-off {
        color: red;
      }
      .timer {
        font-size: 1.5rem;
        margin-top: 10px;
      }

      /* Modern Timer Styles */
      .timer-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 15px;
      }

      .timer-display {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        font-family: "Monaco", "Consolas", monospace;
        font-size: 2rem;
        font-weight: bold;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        position: relative;
        overflow: hidden;
      }

      .timer-display.running {
        animation: timerPulse 2s infinite;
      }

      .timer-display::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        animation: timerShine 3s infinite;
      }

      .timer-controls {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 10px;
      }

      .timer-btn {
        padding: 12px 16px;
        border-radius: 10px;
        border: none;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .timer-btn.start {
        background: linear-gradient(135deg, #11998e, #38ef7d);
        color: white;
      }

      .timer-btn.pause {
        background: linear-gradient(135deg, #f093fb, #f5576c);
        color: white;
      }

      .timer-btn.stop {
        background: linear-gradient(135deg, #fc466b, #3f5efb);
        color: white;
      }

      .timer-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .timer-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .session-stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 15px;
      }

      .stat-card {
        background: linear-gradient(135deg, #ffecd2, #fcb69f);
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .stat-value {
        font-size: 1.2rem;
        font-weight: bold;
        color: #333;
      }

      .stat-label {
        font-size: 0.8rem;
        color: #666;
        margin-top: 5px;
      }

      .productivity-meter {
        margin-top: 15px;
        background: #f0f0f0;
        border-radius: 10px;
        padding: 15px;
      }

      .productivity-bar {
        width: 100%;
        height: 10px;
        background: #e0e0e0;
        border-radius: 5px;
        overflow: hidden;
        margin-top: 10px;
      }

      .productivity-fill {
        height: 100%;
        background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb);
        border-radius: 5px;
        transition: width 0.8s ease;
        position: relative;
      }

      .session-goals {
        margin-top: 15px;
        padding: 15px;
        background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        border-radius: 10px;
        border-left: 4px solid #2196f3;
      }

      .goal-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 8px 0;
        padding: 8px 12px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .goal-checkbox {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 2px solid #2196f3;
        cursor: pointer;
        position: relative;
        transition: all 0.3s ease;
      }

      .goal-checkbox.completed {
        background: #2196f3;
      }

      .goal-checkbox.completed::after {
        content: "‚úì";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 12px;
        font-weight: bold;
      }

      @keyframes timerPulse {
        0%,
        100% {
          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        50% {
          box-shadow: 0 4px 25px rgba(102, 126, 234, 0.6);
        }
      }

      @keyframes timerShine {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      /* Enhanced Chart Cards Styles */
      .chart-section {
        position: relative;
        margin-bottom: 20px;
      }

      .motivation-text {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
        font-size: 0.9rem;
        text-align: center;
        box-shadow: 0 2px 10px rgba(102, 126, 234, 0.2);
      }

      .motivation-text .emoji {
        font-size: 1.2rem;
        margin-right: 8px;
      }

      .improvement-tips {
        margin-top: 15px;
        padding: 15px;
        background: linear-gradient(135deg, #f8fafc, #e2e8f0);
        border-radius: 10px;
        border-left: 4px solid #4a90e2;
      }

      .improvement-tips h4 {
        margin: 0 0 10px 0;
        color: #2d3748;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .tip-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin-top: 10px;
      }

      .tip-item {
        background: white;
        padding: 12px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border-left: 3px solid #4a90e2;
        transition: transform 0.2s ease;
      }

      .tip-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }

      .tip-title {
        font-weight: bold;
        font-size: 0.8rem;
        color: #2d3748;
        margin-bottom: 5px;
      }

      .tip-description {
        font-size: 0.7rem;
        color: #64748b;
        line-height: 1.3;
      }

      .shortcuts-section {
        margin-top: 15px;
        padding: 15px;
        background: linear-gradient(135deg, #fef3c7, #fed7aa);
        border-radius: 10px;
        border-left: 4px solid #f59e0b;
      }

      .shortcut-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 8px;
        margin-top: 10px;
      }

      .shortcut-item {
        background: white;
        padding: 10px;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.75rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .shortcut-key {
        background: #374151;
        color: white;
        padding: 3px 8px;
        border-radius: 4px;
        font-family: monospace;
        font-weight: bold;
        font-size: 0.7rem;
      }

      .performance-metrics {
        margin-top: 15px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
      }

      .metric-card {
        background: linear-gradient(135deg, #10b981, #34d399);
        color: white;
        padding: 12px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
      }

      .metric-value {
        font-size: 1.1rem;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .metric-label {
        font-size: 0.7rem;
        opacity: 0.9;
      }

      .chart-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        flex-wrap: wrap;
      }

      .chart-btn {
        padding: 8px 12px;
        border-radius: 6px;
        border: none;
        background: linear-gradient(135deg, #4a90e2, #67c1f5);
        color: white;
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .chart-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(74, 144, 226, 0.3);
      }

      .chart-btn.active {
        background: linear-gradient(135deg, #10b981, #34d399);
      }

      .weekly-insights {
        margin-top: 15px;
        padding: 15px;
        background: linear-gradient(135deg, #e0f2fe, #b3e5fc);
        border-radius: 10px;
        border-left: 4px solid #0288d1;
      }

      .insight-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 8px 0;
        padding: 8px;
        background: white;
        border-radius: 6px;
        font-size: 0.8rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .insight-icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
      }

      .insight-positive {
        background: #dcfce7;
        color: #166534;
      }
      .insight-warning {
        background: #fef3c7;
        color: #92400e;
      }
      .insight-info {
        background: #dbeafe;
        color: #1e40af;
      }

      /* Enhanced Cloud Sync Styles */
      .cloud-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .sync-status-display {
        background: linear-gradient(135deg, #e0f2fe, #b3e5fc);
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        border-left: 4px solid #0288d1;
      }

      .sync-status-display.connected {
        background: linear-gradient(135deg, #dcfce7, #bbf7d0);
        border-left-color: #10b981;
      }

      .sync-status-display.error {
        background: linear-gradient(135deg, #fef2f2, #fecaca);
        border-left-color: #ef4444;
      }

      .sync-controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
      }

      .sync-btn {
        padding: 10px 15px;
        border-radius: 8px;
        border: none;
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
      }

      .sync-btn.primary {
        background: linear-gradient(135deg, #0ea5e9, #0284c7);
        color: white;
      }

      .sync-btn.success {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
      }

      .sync-btn.warning {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
      }

      .sync-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .sync-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .sync-info {
        margin-top: 15px;
        padding: 15px;
        background: #f8fafc;
        border-radius: 8px;
        font-size: 0.8rem;
        line-height: 1.4;
      }

      .sync-progress {
        width: 100%;
        height: 8px;
        background: #e2e8f0;
        border-radius: 4px;
        overflow: hidden;
        margin: 10px 0;
      }

      .sync-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #0ea5e9, #10b981);
        transition: width 0.3s ease;
        position: relative;
      }

      .sync-progress-bar::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: syncShimmer 2s infinite;
      }

      /* Enhanced API Config Styles */
      .api-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .api-form {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .api-input-group {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .api-input {
        flex: 1;
        padding: 10px 12px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 0.9rem;
        transition: border-color 0.3s ease;
      }

      .api-input:focus {
        outline: none;
        border-color: #4a90e2;
        box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
      }

      .api-btn {
        padding: 10px 15px;
        border-radius: 8px;
        border: none;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
      }

      .api-btn.primary {
        background: linear-gradient(135deg, #4a90e2, #67c1f5);
        color: white;
      }

      .api-btn.test {
        background: linear-gradient(135deg, #10b981, #34d399);
        color: white;
      }

      .api-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .api-status {
        padding: 12px;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: bold;
        text-align: center;
        margin-top: 10px;
      }

      .api-status.success {
        background: #dcfce7;
        color: #166534;
        border-left: 4px solid #10b981;
      }

      .api-status.error {
        background: #fef2f2;
        color: #dc2626;
        border-left: 4px solid #ef4444;
      }

      .api-status.info {
        background: #dbeafe;
        color: #1e40af;
        border-left: 4px solid #3b82f6;
      }

      .api-features {
        margin-top: 15px;
        padding: 15px;
        background: linear-gradient(135deg, #fef3c7, #fed7aa);
        border-radius: 10px;
        border-left: 4px solid #f59e0b;
      }

      .feature-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin-top: 10px;
      }

      .feature-item {
        background: white;
        padding: 10px;
        border-radius: 6px;
        font-size: 0.8rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      /* Enhanced Top Commands Styles */
      .commands-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .command-insights {
        margin-top: 15px;
        padding: 15px;
        background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
        border-radius: 10px;
        border-left: 4px solid #0ea5e9;
      }

      .command-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 10px;
        margin-top: 15px;
      }

      .command-stat {
        background: white;
        padding: 12px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .command-stat-value {
        font-size: 1.2rem;
        font-weight: bold;
        color: #1e293b;
      }

      .command-stat-label {
        font-size: 0.7rem;
        color: #64748b;
        margin-top: 5px;
      }

      .productivity-tips {
        margin-top: 15px;
        padding: 15px;
        background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        border-radius: 10px;
        border-left: 4px solid #10b981;
      }

      @keyframes syncShimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }
    </style>
  </head>
  <body>
    <h1>‚ö° CodeFlow Advanced Dashboard</h1>

    <div class="grid">
      <!-- Daily Coding Hours Chart -->
      <div class="card">
        <div class="chart-section">
          <h2>üìÖ Daily Coding Hours</h2>

          <!-- Motivation Text -->
          <div class="motivation-text">
            <span class="emoji">üéØ</span>
            <strong>Consistency is Key!</strong> Small daily efforts lead to
            massive results. Every hour you code today builds tomorrow's
            expertise.
          </div>

          <!-- Chart Controls -->
          <div class="chart-controls">
            <button
              class="chart-btn active"
              onclick="toggleChartView('daily', 'current')"
            >
              This Week
            </button>
            <button
              class="chart-btn"
              onclick="toggleChartView('daily', 'previous')"
            >
              Last Week
            </button>
            <button
              class="chart-btn"
              onclick="toggleChartView('daily', 'month')"
            >
              This Month
            </button>
            <button class="chart-btn" onclick="exportChart('daily')">
              üìä Export
            </button>
          </div>

          <canvas id="dailyHoursChart"></canvas>

          <!-- Performance Metrics -->
          <div class="performance-metrics">
            <div class="metric-card">
              <div class="metric-value" id="dailyAverage">5.2h</div>
              <div class="metric-label">Daily Average</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="weeklyTotal">36h</div>
              <div class="metric-label">Weekly Total</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="streakDays">12</div>
              <div class="metric-label">Day Streak</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="efficiency">87%</div>
              <div class="metric-label">Efficiency</div>
            </div>
          </div>

          <!-- Improvement Tips -->
          <div class="improvement-tips">
            <h4>üí° Boost Your Daily Coding</h4>
            <div class="tip-grid">
              <div class="tip-item">
                <div class="tip-title">üåÖ Morning Code Sessions</div>
                <div class="tip-description">
                  Start with 1-2 hours of focused coding when your mind is fresh
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üçÖ Pomodoro Technique</div>
                <div class="tip-description">
                  25-min focused sessions with 5-min breaks for maximum
                  productivity
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üì± Eliminate Distractions</div>
                <div class="tip-description">
                  Use focus apps, silent mode, and dedicated coding workspace
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üéØ Set Daily Goals</div>
                <div class="tip-description">
                  Define specific, achievable tasks before starting each session
                </div>
              </div>
            </div>
          </div>

          <!-- Keyboard Shortcuts -->
          <div class="shortcuts-section">
            <h4>‚ö° Essential VS Code Shortcuts</h4>
            <div class="shortcut-grid">
              <div class="shortcut-item">
                <span>Quick File Open</span>
                <span class="shortcut-key">Ctrl+P</span>
              </div>
              <div class="shortcut-item">
                <span>Command Palette</span>
                <span class="shortcut-key">Ctrl+Shift+P</span>
              </div>
              <div class="shortcut-item">
                <span>Multi-Cursor</span>
                <span class="shortcut-key">Alt+Click</span>
              </div>
              <div class="shortcut-item">
                <span>Duplicate Line</span>
                <span class="shortcut-key">Shift+Alt+‚Üì</span>
              </div>
              <div class="shortcut-item">
                <span>Format Document</span>
                <span class="shortcut-key">Shift+Alt+F</span>
              </div>
              <div class="shortcut-item">
                <span>Toggle Comment</span>
                <span class="shortcut-key">Ctrl+/</span>
              </div>
              <div class="shortcut-item">
                <span>Find & Replace</span>
                <span class="shortcut-key">Ctrl+H</span>
              </div>
              <div class="shortcut-item">
                <span>Go to Definition</span>
                <span class="shortcut-key">F12</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Weekly Report -->
      <div class="card">
        <div class="chart-section">
          <h2>üìä Weekly Productivity Trend</h2>

          <!-- Motivation Text -->
          <div class="motivation-text">
            <span class="emoji">üìà</span>
            <strong>Track Your Growth!</strong> Analyze patterns, identify peak
            performance times, and optimize your coding schedule for maximum
            impact.
          </div>

          <!-- Chart Controls -->
          <div class="chart-controls">
            <button
              class="chart-btn active"
              onclick="toggleChartView('weekly', 'productivity')"
            >
              Productivity
            </button>
            <button
              class="chart-btn"
              onclick="toggleChartView('weekly', 'focus')"
            >
              Focus Score
            </button>
            <button
              class="chart-btn"
              onclick="toggleChartView('weekly', 'commits')"
            >
              Commits
            </button>
            <button class="chart-btn" onclick="generateWeeklyReport()">
              üìë Generate Report
            </button>
          </div>

          <canvas id="weeklyChart"></canvas>

          <!-- Weekly Insights -->
          <div class="weekly-insights">
            <h4>üîç Weekly Insights</h4>
            <div class="insight-item">
              <div class="insight-icon insight-positive">üìà</div>
              <span
                ><strong>Peak Day:</strong> Thursday shows 23% higher
                productivity than average</span
              >
            </div>
            <div class="insight-item">
              <div class="insight-icon insight-warning">‚ö†Ô∏è</div>
              <span
                ><strong>Low Energy:</strong> Monday performance dropped 15% -
                consider lighter tasks</span
              >
            </div>
            <div class="insight-item">
              <div class="insight-icon insight-info">üí°</div>
              <span
                ><strong>Opportunity:</strong> Weekend coding sessions could
                boost weekly total by 20%</span
              >
            </div>
            <div class="insight-item">
              <div class="insight-icon insight-positive">üéØ</div>
              <span
                ><strong>Consistency:</strong> You're maintaining 85% daily goal
                achievement rate</span
              >
            </div>
          </div>

          <!-- Advanced Performance Tips -->
          <div class="improvement-tips">
            <h4>üöÄ Advanced Performance Optimization</h4>
            <div class="tip-grid">
              <div class="tip-item">
                <div class="tip-title">‚ö° Hot Reloading</div>
                <div class="tip-description">
                  Use dev servers with hot reload to see changes instantly
                  without manual refresh
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üîß Code Snippets</div>
                <div class="tip-description">
                  Create custom snippets for frequently used code patterns and
                  boilerplates
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üîç IntelliSense</div>
                <div class="tip-description">
                  Leverage auto-completion and type checking to code faster and
                  with fewer errors
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üìù Live Templates</div>
                <div class="tip-description">
                  Use IDE templates for common code structures like loops,
                  functions, and classes
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üîÑ Refactoring Tools</div>
                <div class="tip-description">
                  Use automated refactoring to rename variables, extract
                  methods, and restructure code
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üêõ Debugging Shortcuts</div>
                <div class="tip-description">
                  Master breakpoints, step-through debugging, and variable
                  inspection tools
                </div>
              </div>
            </div>
          </div>

          <!-- Fast Coding Techniques -->
          <div class="shortcuts-section">
            <h4>üèÉ‚Äç‚ôÇÔ∏è Fast Coding Techniques</h4>
            <div class="tip-grid">
              <div class="tip-item">
                <div class="tip-title">üìã Clipboard History</div>
                <div class="tip-description">
                  Use Ctrl+Shift+V to access clipboard history and paste
                  previous copies
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üî§ Emmet Abbreviations</div>
                <div class="tip-description">
                  Type "div.container>ul>li*5" and press Tab for instant HTML
                  structure
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">‚ö° Zen Mode</div>
                <div class="tip-description">
                  Press Ctrl+K Z for distraction-free coding environment
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üîç Symbol Search</div>
                <div class="tip-description">
                  Use Ctrl+T to quickly jump to any function, class, or variable
                  in your project
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Commands -->
      <div class="card">
        <div class="commands-container">
          <h2>‚å®Ô∏è Smart Command Analytics</h2>

          <!-- Motivation Text -->
          <div class="motivation-text">
            <span class="emoji">üöÄ</span>
            <strong>Master Your Workflow!</strong> Track your most-used commands
            and discover productivity patterns to optimize your development
            speed.
          </div>

          <!-- Chart Controls -->
          <div class="chart-controls">
            <button
              class="chart-btn active"
              onclick="toggleCommandView('frequency')"
            >
              Frequency
            </button>
            <button class="chart-btn" onclick="toggleCommandView('efficiency')">
              Efficiency
            </button>
            <button class="chart-btn" onclick="toggleCommandView('time')">
              Time Saved
            </button>
            <button class="chart-btn" onclick="analyzeCommands()">
              üìä Analyze
            </button>
          </div>

          <canvas id="commandsChart"></canvas>

          <!-- Command Statistics -->
          <div class="command-stats">
            <div class="command-stat">
              <div class="command-stat-value" id="totalCommands">847</div>
              <div class="command-stat-label">Total Commands</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="dailyAvgCommands">142</div>
              <div class="command-stat-label">Daily Average</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="timeSaved">2.3h</div>
              <div class="command-stat-label">Time Saved</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="efficiency">94%</div>
              <div class="command-stat-label">Efficiency</div>
            </div>
          </div>

          <!-- Command Insights -->
          <div class="command-insights">
            <h4>üí° Command Insights & Recommendations</h4>
            <div class="insight-item">
              <div class="insight-icon insight-positive">‚ö°</div>
              <span
                ><strong>Top Performer:</strong> Format Document saves 15
                minutes daily</span
              >
            </div>
            <div class="insight-item">
              <div class="insight-icon insight-info">üí°</div>
              <span
                ><strong>Suggestion:</strong> Try Ctrl+Shift+L for multi-cursor
                selection to boost productivity</span
              >
            </div>
            <div class="insight-item">
              <div class="insight-icon insight-warning">üéØ</div>
              <span
                ><strong>Opportunity:</strong> Use Ctrl+` to toggle terminal
                faster than mouse clicks</span
              >
            </div>
            <div class="insight-item">
              <div class="insight-icon insight-positive">üèÜ</div>
              <span
                ><strong>Achievement:</strong> You're in the top 15% of
                efficient VS Code users!</span
              >
            </div>
          </div>

          <!-- Productivity Tips -->
          <div class="productivity-tips">
            <h4>üöÄ Command Mastery Tips</h4>
            <div class="tip-grid">
              <div class="tip-item">
                <div class="tip-title">üîÑ Workflow Automation</div>
                <div class="tip-description">
                  Create custom keybindings for frequent command sequences to
                  reduce repetitive actions
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üìã Command Palette Power</div>
                <div class="tip-description">
                  Use Ctrl+Shift+P and start typing - it's often faster than
                  menu navigation
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üéØ Context Awareness</div>
                <div class="tip-description">
                  Learn context-specific shortcuts like F2 for rename and F5 for
                  debug start
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">‚ö° Multi-Command Actions</div>
                <div class="tip-description">
                  Combine Ctrl+K with other keys for powerful command sequences
                </div>
              </div>
            </div>
          </div>

          <!-- Advanced Shortcuts -->
          <div class="shortcuts-section">
            <h4>üèÜ Pro-Level Commands</h4>
            <div class="shortcut-grid">
              <div class="shortcut-item">
                <span>Select All Occurrences</span>
                <span class="shortcut-key">Ctrl+Shift+L</span>
              </div>
              <div class="shortcut-item">
                <span>Toggle Terminal</span>
                <span class="shortcut-key">Ctrl+`</span>
              </div>
              <div class="shortcut-item">
                <span>Quick Fix</span>
                <span class="shortcut-key">Ctrl+.</span>
              </div>
              <div class="shortcut-item">
                <span>Peek Definition</span>
                <span class="shortcut-key">Alt+F12</span>
              </div>
              <div class="shortcut-item">
                <span>Column Selection</span>
                <span class="shortcut-key">Shift+Alt+Drag</span>
              </div>
              <div class="shortcut-item">
                <span>Zen Mode</span>
                <span class="shortcut-key">Ctrl+K Z</span>
              </div>
              <div class="shortcut-item">
                <span>Toggle Sidebar</span>
                <span class="shortcut-key">Ctrl+B</span>
              </div>
              <div class="shortcut-item">
                <span>Show References</span>
                <span class="shortcut-key">Shift+F12</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tracking + Timer -->
      <div class="card">
        <h2>‚è±Ô∏è Smart Productivity Timer</h2>

        <!-- Tracking Toggle -->
        <label
          style="
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
          "
        >
          <input
            type="checkbox"
            id="trackingToggle"
            style="transform: scale(1.2)"
          />
          <span>Enable Smart Tracking</span>
        </label>
        <p id="trackingStatus" style="margin-bottom: 15px">Tracking is OFF</p>

        <!-- Timer Container -->
        <div class="timer-container">
          <!-- Timer Display -->
          <div class="timer-display" id="timerDisplay">
            <div id="timer">00:00:00</div>
            <div
              style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8"
              id="timerMode"
            >
              Ready to Start
            </div>
          </div>

          <!-- Timer Controls -->
          <div class="timer-controls">
            <button
              class="timer-btn start"
              id="startBtn"
              onclick="startTimer()"
            >
              ‚ñ∂Ô∏è Start
            </button>
            <button
              class="timer-btn pause"
              id="pauseBtn"
              onclick="pauseTimer()"
              disabled
            >
              ‚è∏Ô∏è Pause
            </button>
            <button
              class="timer-btn stop"
              id="stopBtn"
              onclick="stopTimer()"
              disabled
            >
              ‚èπÔ∏è Stop
            </button>
          </div>

          <!-- Session Statistics -->
          <div class="session-stats">
            <div class="stat-card">
              <div class="stat-value" id="todayTime">0h 0m</div>
              <div class="stat-label">Today's Total</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="sessionCount">0</div>
              <div class="stat-label">Sessions</div>
            </div>
          </div>

          <!-- Productivity Meter -->
          <div class="productivity-meter">
            <div
              style="font-size: 0.9rem; font-weight: bold; margin-bottom: 8px"
            >
              Productivity Score: <span id="productivityScore">0%</span>
            </div>
            <div class="productivity-bar">
              <div
                class="productivity-fill"
                id="productivityFill"
                style="width: 0%"
              ></div>
            </div>
          </div>

          <!-- Session Goals -->
          <div class="session-goals">
            <h4 style="margin: 0 0 10px 0">üìã Session Goals</h4>
            <div class="goal-item">
              <span>Code for 25 minutes (Pomodoro)</span>
              <div
                class="goal-checkbox"
                id="goal1"
                onclick="toggleGoal('goal1')"
              ></div>
            </div>
            <div class="goal-item">
              <span>Complete 1 feature</span>
              <div
                class="goal-checkbox"
                id="goal2"
                onclick="toggleGoal('goal2')"
              ></div>
            </div>
            <div class="goal-item">
              <span>Write documentation</span>
              <div
                class="goal-checkbox"
                id="goal3"
                onclick="toggleGoal('goal3')"
              ></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Badges -->
      <div class="card">
        <h2>üèÖ Earned Badges & Achievements</h2>
        <div class="badges">
          <div
            class="badge unlocked"
            data-level="15"
            onclick="showBadgeDetails('streak')"
          >
            <span class="badge-level">Lv.15</span>
            <span class="badge-icon">üî•</span>
            <div class="badge-title">Fire Streak</div>
            <div class="badge-description">15 days coding streak</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 80%"
                data-progress="80"
              ></div>
            </div>
            <div class="badge-tooltip">
              Next: 20 day streak for Master level!
            </div>
          </div>

          <div
            class="badge epic unlocked"
            data-level="8"
            onclick="showBadgeDetails('speed')"
          >
            <span class="badge-level">Lv.8</span>
            <span class="badge-icon">‚ö°</span>
            <div class="badge-title">Lightning Coder</div>
            <div class="badge-description">1000+ lines per day</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 60%"
                data-progress="60"
              ></div>
            </div>
            <div class="badge-tooltip">
              Epic tier achieved! Next: Legendary at Lv.10
            </div>
          </div>

          <div
            class="badge"
            data-level="3"
            onclick="showBadgeDetails('master')"
          >
            <span class="badge-level">Lv.3</span>
            <span class="badge-icon">üèÜ</span>
            <div class="badge-title">Code Master</div>
            <div class="badge-description">Master 5 languages</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 40%"
                data-progress="40"
              ></div>
            </div>
            <div class="badge-tooltip">Learn 2 more languages to unlock!</div>
          </div>

          <div
            class="badge legendary unlocked"
            data-level="25"
            onclick="showBadgeDetails('night')"
          >
            <span class="badge-level">Lv.25</span>
            <span class="badge-icon">üåô</span>
            <div class="badge-title">Night Owl</div>
            <div class="badge-description">100 late night sessions</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 100%"
                data-progress="100"
              ></div>
            </div>
            <div class="badge-tooltip">Legendary achievement unlocked!</div>
          </div>

          <div
            class="badge unlocked"
            data-level="12"
            onclick="showBadgeDetails('bug')"
          >
            <span class="badge-level">Lv.12</span>
            <span class="badge-icon">üêõ</span>
            <div class="badge-title">Bug Hunter</div>
            <div class="badge-description">Fixed 500+ bugs</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 90%"
                data-progress="90"
              ></div>
            </div>
            <div class="badge-tooltip">
              Almost at Epic tier! 50 more bugs to go
            </div>
          </div>

          <div class="badge" data-level="1" onclick="showBadgeDetails('team')">
            <span class="badge-level">Lv.1</span>
            <span class="badge-icon">üë•</span>
            <div class="badge-title">Team Player</div>
            <div class="badge-description">Collaborate on projects</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 20%"
                data-progress="20"
              ></div>
            </div>
            <div class="badge-tooltip">Join more collaborative projects!</div>
          </div>
        </div>

        <div style="margin-top: 20px; text-align: center">
          <button onclick="simulateProgress()" style="margin-right: 10px">
            üéØ Simulate Progress
          </button>
          <button onclick="unlockRandomBadge()">üéÅ Random Unlock</button>
        </div>
      </div>

      <!-- Cloud Sync -->
      <div class="card">
        <div class="cloud-container">
          <h2>‚òÅÔ∏è Smart Cloud Synchronization</h2>

          <!-- Motivation Text -->
          <div class="motivation-text">
            <span class="emoji">üåê</span>
            <strong>Stay Connected!</strong> Seamlessly sync your coding data
            across devices and never lose your productivity insights.
          </div>

          <!-- Sync Status Display -->
          <div class="sync-status-display" id="syncStatusDisplay">
            <div
              style="
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
              "
            >
              <span id="syncIcon">‚è∏Ô∏è</span>
              <span id="syncStatusText">Cloud Sync is OFF</span>
            </div>
            <div
              id="syncDetails"
              style="margin-top: 8px; font-size: 0.8rem; opacity: 0.8"
            >
              Connect to sync your data across devices
            </div>
          </div>

          <!-- Sync Progress -->
          <div id="syncProgressContainer" style="display: none">
            <div class="sync-progress">
              <div
                class="sync-progress-bar"
                id="syncProgressBar"
                style="width: 0%"
              ></div>
            </div>
            <div
              id="syncProgressText"
              style="text-align: center; font-size: 0.8rem; color: #64748b"
            >
              Preparing to sync...
            </div>
          </div>

          <!-- Sync Controls -->
          <div class="sync-controls">
            <button
              class="sync-btn primary"
              id="toggleSyncBtn"
              onclick="toggleCloudSync()"
            >
              Connect Cloud
            </button>
            <button
              class="sync-btn success"
              id="manualSyncBtn"
              onclick="manualSync()"
              disabled
            >
              üì§ Sync Now
            </button>
            <button class="sync-btn warning" onclick="exportData()">
              üì• Export Data
            </button>
            <button class="sync-btn primary" onclick="importData()">
              üì§ Import Data
            </button>
          </div>

          <!-- Sync Information -->
          <div class="sync-info">
            <h4 style="margin: 0 0 10px 0">üîí How Cloud Sync Works</h4>
            <p style="margin: 5px 0">
              <strong>üõ°Ô∏è Security:</strong> All data is encrypted using AES-256
              encryption before upload
            </p>
            <p style="margin: 5px 0">
              <strong>üìä Data Synced:</strong> Coding hours, productivity
              scores, badges, and session history
            </p>
            <p style="margin: 5px 0">
              <strong>üîÑ Auto-Sync:</strong> Automatically syncs every 15
              minutes when connected
            </p>
            <p style="margin: 5px 0">
              <strong>üì± Cross-Platform:</strong> Access your data on any device
              with CodeFlow
            </p>
            <p style="margin: 5px 0">
              <strong>üíæ Backup:</strong> 30-day rolling backup with version
              history
            </p>
          </div>

          <!-- Sync Features -->
          <div class="api-features">
            <h4>‚ú® Cloud Sync Benefits</h4>
            <div class="feature-list">
              <div class="feature-item">
                <strong>üîÑ Real-time Sync</strong><br />
                <small>Instant data updates across all devices</small>
              </div>
              <div class="feature-item">
                <strong>üìà Analytics Continuity</strong><br />
                <small>Maintain streak and progress tracking</small>
              </div>
              <div class="feature-item">
                <strong>üõ°Ô∏è Secure Storage</strong><br />
                <small>Bank-level encryption and security</small>
              </div>
              <div class="feature-item">
                <strong>üì± Multi-Device</strong><br />
                <small>Seamless experience on desktop and mobile</small>
              </div>
              <div class="feature-item">
                <strong>‚ö° Fast Access</strong><br />
                <small>CDN-powered global data delivery</small>
              </div>
              <div class="feature-item">
                <strong>üîÑ Version Control</strong><br />
                <small>Track changes and restore previous states</small>
              </div>
            </div>
          </div>

          <!-- Sync Statistics -->
          <div class="command-stats">
            <div class="command-stat">
              <div class="command-stat-value" id="lastSyncTime">--</div>
              <div class="command-stat-label">Last Sync</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="syncSize">0 KB</div>
              <div class="command-stat-label">Data Size</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="syncDevices">1</div>
              <div class="command-stat-label">Devices</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="syncUptime">99.9%</div>
              <div class="command-stat-label">Uptime</div>
            </div>
          </div>
        </div>
      </div>

      <!-- API Config -->
      <div class="card">
        <div class="api-container">
          <h2>‚öôÔ∏è Advanced API Configuration</h2>

          <!-- Motivation Text -->
          <div class="motivation-text">
            <span class="emoji">üîå</span>
            <strong>Power Up with APIs!</strong> Connect external services to
            supercharge your productivity tracking and gain deeper insights.
          </div>

          <!-- API Configuration Form -->
          <div class="api-form">
            <div class="api-input-group">
              <input
                type="text"
                class="api-input"
                id="apiKey"
                placeholder="Enter GitHub API Token"
              />
              <button class="api-btn primary" onclick="saveAPI()">
                üíæ Save
              </button>
              <button class="api-btn test" onclick="testAPI()">üß™ Test</button>
            </div>

            <div class="api-input-group">
              <select class="api-input" id="apiProvider">
                <option value="github">GitHub API</option>
                <option value="gitlab">GitLab API</option>
                <option value="bitbucket">Bitbucket API</option>
                <option value="azure">Azure DevOps</option>
                <option value="slack">Slack Integration</option>
                <option value="discord">Discord Webhooks</option>
              </select>
              <button class="api-btn primary" onclick="configureProvider()">
                ‚öôÔ∏è Configure
              </button>
            </div>

            <div class="api-input-group">
              <input
                type="url"
                class="api-input"
                id="webhookUrl"
                placeholder="Webhook URL (Optional)"
              />
              <button class="api-btn primary" onclick="testWebhook()">
                üì° Test Hook
              </button>
            </div>
          </div>

          <!-- API Status -->
          <div id="apiStatus" class="api-status info">
            üîå Ready to connect - Enter your API credentials above
          </div>

          <!-- API Features -->
          <div class="api-features">
            <h4>üöÄ API Integration Features</h4>
            <div class="feature-list">
              <div class="feature-item">
                <strong>üìä GitHub Stats</strong><br />
                <small>Pull commits, PRs, and contribution data</small>
              </div>
              <div class="feature-item">
                <strong>üîî Smart Notifications</strong><br />
                <small>Slack/Discord alerts for milestones</small>
              </div>
              <div class="feature-item">
                <strong>üìà Advanced Analytics</strong><br />
                <small>Cross-platform productivity insights</small>
              </div>
              <div class="feature-item">
                <strong>ü§ñ Automation</strong><br />
                <small>Trigger workflows based on coding patterns</small>
              </div>
              <div class="feature-item">
                <strong>üìù Issue Tracking</strong><br />
                <small>Sync with Jira, Linear, or GitHub Issues</small>
              </div>
              <div class="feature-item">
                <strong>‚è∞ Time Tracking</strong><br />
                <small>Integration with Toggl, Harvest, or RescueTime</small>
              </div>
            </div>
          </div>

          <!-- API Documentation -->
          <div class="improvement-tips">
            <h4>üìö How to Set Up API Integrations</h4>
            <div class="tip-grid">
              <div class="tip-item">
                <div class="tip-title">üîë GitHub Token</div>
                <div class="tip-description">
                  Go to GitHub Settings ‚Üí Developer Settings ‚Üí Personal Access
                  Tokens ‚Üí Generate new token with repo and user permissions
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üîí Security Best Practices</div>
                <div class="tip-description">
                  Use tokens with minimal required permissions and set
                  expiration dates for enhanced security
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üì° Webhook Setup</div>
                <div class="tip-description">
                  Configure webhooks in your repository settings to receive
                  real-time updates on code changes
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-title">üîÑ Rate Limiting</div>
                <div class="tip-description">
                  Be aware of API rate limits - GitHub allows 5000 requests/hour
                  for authenticated users
                </div>
              </div>
            </div>
          </div>

          <!-- API Usage Statistics -->
          <div class="command-stats">
            <div class="command-stat">
              <div class="command-stat-value" id="apiCalls">0</div>
              <div class="command-stat-label">API Calls Today</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="apiLimit">5000</div>
              <div class="command-stat-label">Rate Limit</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="apiLatency">--</div>
              <div class="command-stat-label">Avg Latency</div>
            </div>
            <div class="command-stat">
              <div class="command-stat-value" id="apiUptime">--</div>
              <div class="command-stat-label">API Status</div>
            </div>
          </div>

          <!-- Advanced Configuration -->
          <div class="shortcuts-section">
            <h4>‚ö° Quick API Actions</h4>
            <div class="shortcut-grid">
              <div class="shortcut-item">
                <span>Fetch Latest Commits</span>
                <button
                  class="sync-btn"
                  onclick="fetchCommits()"
                  style="padding: 4px 8px; font-size: 0.7rem"
                >
                  üîÑ Fetch
                </button>
              </div>
              <div class="shortcut-item">
                <span>Update Repository Stats</span>
                <button
                  class="sync-btn"
                  onclick="updateRepoStats()"
                  style="padding: 4px 8px; font-size: 0.7rem"
                >
                  üìä Update
                </button>
              </div>
              <div class="shortcut-item">
                <span>Send Test Notification</span>
                <button
                  class="sync-btn"
                  onclick="sendTestNotification()"
                  style="padding: 4px 8px; font-size: 0.7rem"
                >
                  üîî Send
                </button>
              </div>
              <div class="shortcut-item">
                <span>Validate All Connections</span>
                <button
                  class="sync-btn"
                  onclick="validateConnections()"
                  style="padding: 4px 8px; font-size: 0.7rem"
                >
                  ‚úÖ Validate
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Enhanced Chart Data Storage
      const chartData = {
        daily: {
          current: {
            labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
            hours: [4.2, 6.1, 5.3, 7.5, 3.8, 2.1, 4.0],
            efficiency: [85, 92, 78, 96, 70, 60, 82],
          },
          previous: {
            labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
            hours: [3.5, 5.2, 4.8, 6.2, 4.1, 1.8, 3.2],
            efficiency: [78, 85, 82, 89, 75, 55, 76],
          },
          month: {
            labels: ["Week 1", "Week 2", "Week 3", "Week 4"],
            hours: [32, 28, 35, 31],
            efficiency: [83, 79, 87, 85],
          },
        },
        weekly: {
          productivity: [70, 85, 60, 90, 75, 50, 65],
          focus: [80, 92, 65, 95, 78, 45, 70],
          commits: [12, 18, 8, 22, 15, 3, 11],
        },
      };

      // Chart instances
      let dailyChart, weeklyChart;

      // Initialize Daily Coding Hours Chart
      function initDailyChart() {
        const ctx = document.getElementById("dailyHoursChart").getContext("2d");
        dailyChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: chartData.daily.current.labels,
            datasets: [
              {
                label: "Hours Worked",
                data: chartData.daily.current.hours,
                backgroundColor: [
                  "#4a90e2",
                  "#67c1f5",
                  "#50e3c2",
                  "#f5a623",
                  "#d0021b",
                  "#7b68ee",
                  "#20b2aa",
                ],
                borderColor: "#2c5282",
                borderWidth: 1,
                borderRadius: 8,
                borderSkipped: false,
              },
              {
                label: "Efficiency %",
                data: chartData.daily.current.efficiency,
                type: "line",
                borderColor: "#10b981",
                backgroundColor: "rgba(16, 185, 129, 0.1)",
                yAxisID: "y1",
                tension: 0.4,
                fill: true,
              },
            ],
          },
          options: {
            responsive: true,
            interaction: {
              mode: "index",
              intersect: false,
            },
            plugins: {
              legend: {
                position: "top",
              },
              tooltip: {
                callbacks: {
                  afterLabel: function (context) {
                    if (context.datasetIndex === 0) {
                      return `Efficiency: ${
                        chartData.daily.current.efficiency[context.dataIndex]
                      }%`;
                    }
                    return "";
                  },
                },
              },
            },
            scales: {
              y: {
                type: "linear",
                display: true,
                position: "left",
                beginAtZero: true,
                title: { display: true, text: "Hours" },
                grid: { color: "rgba(0,0,0,0.1)" },
              },
              y1: {
                type: "linear",
                display: true,
                position: "right",
                beginAtZero: true,
                max: 100,
                title: { display: true, text: "Efficiency %" },
                grid: { drawOnChartArea: false },
              },
              x: {
                title: { display: true, text: "Days" },
                grid: { color: "rgba(0,0,0,0.1)" },
              },
            },
            animation: {
              duration: 2000,
              easing: "easeInOutQuart",
            },
          },
        });
      }

      // Initialize Weekly Productivity Chart
      function initWeeklyChart() {
        const ctx = document.getElementById("weeklyChart").getContext("2d");
        weeklyChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
            datasets: [
              {
                label: "Productivity Score",
                data: chartData.weekly.productivity,
                borderColor: "#67c1f5",
                backgroundColor: "rgba(103,193,245,0.2)",
                fill: true,
                tension: 0.4,
                pointBackgroundColor: "#4a90e2",
                pointBorderColor: "#ffffff",
                pointBorderWidth: 2,
                pointRadius: 6,
                pointHoverRadius: 8,
              },
            ],
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: "top",
              },
              tooltip: {
                mode: "index",
                intersect: false,
                callbacks: {
                  afterLabel: function (context) {
                    const day = context.label;
                    const score = context.parsed.y;
                    let feedback = "";
                    if (score >= 85) feedback = "üî• Excellent performance!";
                    else if (score >= 70) feedback = "üëç Good productivity";
                    else if (score >= 50) feedback = "üìà Room for improvement";
                    else feedback = "‚ö†Ô∏è Focus needed";
                    return feedback;
                  },
                },
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                max: 100,
                title: { display: true, text: "Productivity Score" },
                grid: { color: "rgba(0,0,0,0.1)" },
              },
              x: {
                title: { display: true, text: "Days" },
                grid: { color: "rgba(0,0,0,0.1)" },
              },
            },
            animation: {
              duration: 2000,
              easing: "easeInOutQuart",
            },
          },
        });
      }

      // Chart Control Functions
      function toggleChartView(chartType, viewType) {
        // Update button states
        const buttons = document.querySelectorAll(`[onclick*="${chartType}"]`);
        buttons.forEach((btn) => btn.classList.remove("active"));
        event.target.classList.add("active");

        if (chartType === "daily") {
          updateDailyChart(viewType);
        } else if (chartType === "weekly") {
          updateWeeklyChart(viewType);
        }
      }

      function updateDailyChart(viewType) {
        const data = chartData.daily[viewType] || chartData.daily.current;

        dailyChart.data.labels = data.labels;
        dailyChart.data.datasets[0].data = data.hours;
        if (data.efficiency) {
          dailyChart.data.datasets[1].data = data.efficiency;
        }

        dailyChart.update("active");
        updateDailyMetrics(viewType);
      }

      function updateWeeklyChart(viewType) {
        const data =
          chartData.weekly[viewType] || chartData.weekly.productivity;

        weeklyChart.data.datasets[0].data = data;
        weeklyChart.data.datasets[0].label =
          viewType.charAt(0).toUpperCase() + viewType.slice(1);

        // Update colors based on chart type
        const colors = {
          productivity: { border: "#67c1f5", bg: "rgba(103,193,245,0.2)" },
          focus: { border: "#10b981", bg: "rgba(16,185,129,0.2)" },
          commits: { border: "#f59e0b", bg: "rgba(245,158,11,0.2)" },
        };

        weeklyChart.data.datasets[0].borderColor = colors[viewType].border;
        weeklyChart.data.datasets[0].backgroundColor = colors[viewType].bg;
        weeklyChart.update("active");
      }

      function updateDailyMetrics(viewType = "current") {
        const data = chartData.daily[viewType];
        const totalHours = data.hours.reduce((a, b) => a + b, 0);
        const avgHours = totalHours / data.hours.length;
        const avgEfficiency = data.efficiency
          ? data.efficiency.reduce((a, b) => a + b, 0) / data.efficiency.length
          : 85;

        // Calculate streak (simplified)
        const streak = data.hours.filter((h) => h > 0).length;

        document.getElementById(
          "dailyAverage"
        ).textContent = `${avgHours.toFixed(1)}h`;
        document.getElementById(
          "weeklyTotal"
        ).textContent = `${totalHours.toFixed(0)}h`;
        document.getElementById("streakDays").textContent = streak;
        document.getElementById("efficiency").textContent = `${Math.round(
          avgEfficiency
        )}%`;
      }

      function exportChart(chartType) {
        const chart = chartType === "daily" ? dailyChart : weeklyChart;
        const url = chart.toBase64Image();
        const link = document.createElement("a");
        link.download = `${chartType}-chart-${
          new Date().toISOString().split("T")[0]
        }.png`;
        link.href = url;
        link.click();

        showNotification(
          `üìä ${
            chartType.charAt(0).toUpperCase() + chartType.slice(1)
          } chart exported successfully!`
        );
      }

      function generateWeeklyReport() {
        const report = {
          totalHours: chartData.daily.current.hours.reduce((a, b) => a + b, 0),
          avgProductivity:
            chartData.weekly.productivity.reduce((a, b) => a + b, 0) / 7,
          peakDay:
            chartData.daily.current.labels[
              chartData.weekly.productivity.indexOf(
                Math.max(...chartData.weekly.productivity)
              )
            ],
          improvements: [
            "Consider morning coding sessions for better focus",
            "Use Pomodoro technique on low-energy days",
            "Schedule complex tasks during peak performance times",
          ],
        };

        const reportHTML = `
          <div style="background: white; padding: 20px; border-radius: 10px; max-width: 400px;">
            <h3>üìë Weekly Report</h3>
            <p><strong>Total Hours:</strong> ${report.totalHours.toFixed(
              1
            )}h</p>
            <p><strong>Avg Productivity:</strong> ${Math.round(
              report.avgProductivity
            )}%</p>
            <p><strong>Peak Day:</strong> ${report.peakDay}</p>
            <h4>üí° Suggestions:</h4>
            <ul>
              ${report.improvements.map((item) => `<li>${item}</li>`).join("")}
            </ul>
            <button onclick="this.closest('.modal').remove()" style="margin-top: 15px; width: 100%;">Close</button>
          </div>
        `;

        showModal(reportHTML);
      }

      function showModal(content) {
        const modal = document.createElement("div");
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.8);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1002;
          animation: fadeIn 0.3s ease;
        `;
        modal.innerHTML = content;
        modal.className = "modal";
        document.body.appendChild(modal);
      }

      // Initialize charts on load
      document.addEventListener("DOMContentLoaded", function () {
        initDailyChart();
        initWeeklyChart();
        updateDailyMetrics();

        // Auto-update charts every 30 seconds with slight variations
        setInterval(() => {
          const currentHour = new Date().getHours();
          if (currentHour >= 9 && currentHour <= 17) {
            // Working hours
            // Simulate real-time updates
            const todayIndex = new Date().getDay() || 7; // Sunday = 0, make it 7
            if (todayIndex <= 7) {
              chartData.daily.current.hours[todayIndex - 1] +=
                Math.random() * 0.1;
              chartData.daily.current.efficiency[todayIndex - 1] = Math.min(
                100,
                chartData.daily.current.efficiency[todayIndex - 1] +
                  (Math.random() - 0.5) * 2
              );
              updateDailyChart("current");
            }
          }
        }, 30000);
      });

      // Enhanced Commands Data
      const commandsData = {
        frequency: {
          labels: [
            "Format",
            "Save",
            "Run",
            "Debug",
            "Refactor",
            "Find",
            "Git Commit",
          ],
          data: [124, 98, 87, 45, 32, 156, 67],
          colors: [
            "#4a90e2",
            "#67c1f5",
            "#50e3c2",
            "#f5a623",
            "#d0021b",
            "#8b5cf6",
            "#10b981",
          ],
        },
        efficiency: {
          labels: [
            "Format",
            "Save",
            "Run",
            "Debug",
            "Refactor",
            "Find",
            "Git Commit",
          ],
          data: [95, 88, 92, 78, 85, 97, 90],
          colors: [
            "#10b981",
            "#34d399",
            "#6ee7b7",
            "#a7f3d0",
            "#d1fae5",
            "#ecfdf5",
            "#f0fdfa",
          ],
        },
        time: {
          labels: [
            "Format",
            "Save",
            "Run",
            "Debug",
            "Refactor",
            "Find",
            "Git Commit",
          ],
          data: [45, 32, 28, 67, 89, 23, 15], // minutes saved per week
          colors: [
            "#f59e0b",
            "#fbbf24",
            "#fcd34d",
            "#fde68a",
            "#fef3c7",
            "#fffbeb",
            "#f59e0b",
          ],
        },
      };

      let commandsChart;

      // Initialize Enhanced Commands Chart
      function initCommandsChart() {
        const ctx = document.getElementById("commandsChart").getContext("2d");
        commandsChart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: commandsData.frequency.labels,
            datasets: [
              {
                data: commandsData.frequency.data,
                backgroundColor: commandsData.frequency.colors,
                borderWidth: 3,
                borderColor: "#ffffff",
                hoverOffset: 8,
              },
            ],
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: "bottom",
                labels: {
                  padding: 20,
                  usePointStyle: true,
                },
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    const label = context.label;
                    const value = context.parsed;
                    const total = context.dataset.data.reduce(
                      (a, b) => a + b,
                      0
                    );
                    const percentage = Math.round((value / total) * 100);
                    return `${label}: ${value} uses (${percentage}%)`;
                  },
                  afterLabel: function (context) {
                    const efficiency =
                      commandsData.efficiency.data[context.dataIndex];
                    const timeSaved = commandsData.time.data[context.dataIndex];
                    return [
                      `Efficiency: ${efficiency}%`,
                      `Time saved: ${timeSaved}min/week`,
                    ];
                  },
                },
              },
            },
            animation: {
              animateScale: true,
              animateRotate: true,
              duration: 2000,
            },
          },
        });
      }

      // Command Chart Controls
      function toggleCommandView(viewType) {
        const buttons = document.querySelectorAll(
          '[onclick*="toggleCommandView"]'
        );
        buttons.forEach((btn) => btn.classList.remove("active"));
        event.target.classList.add("active");

        const data = commandsData[viewType];
        commandsChart.data.datasets[0].data = data.data;
        commandsChart.data.datasets[0].backgroundColor = data.colors;
        commandsChart.update("active");

        updateCommandStats(viewType);
      }

      function updateCommandStats(viewType = "frequency") {
        const data = commandsData[viewType];
        const total = data.data.reduce((a, b) => a + b, 0);
        const avg = Math.round(total / 7); // daily average

        document.getElementById("totalCommands").textContent = total;
        document.getElementById("dailyAvgCommands").textContent = avg;

        if (viewType === "time") {
          const totalHours = Math.round((total / 60) * 100) / 100;
          document.getElementById("timeSaved").textContent = `${totalHours}h`;
        }
      }

      function analyzeCommands() {
        const analysis = {
          topCommand:
            commandsData.frequency.labels[
              commandsData.frequency.data.indexOf(
                Math.max(...commandsData.frequency.data)
              )
            ],
          efficiency: Math.round(
            commandsData.efficiency.data.reduce((a, b) => a + b, 0) /
              commandsData.efficiency.data.length
          ),
          weeklyTimeSaved: commandsData.time.data.reduce((a, b) => a + b, 0),
          recommendations: [
            "Consider creating a custom shortcut for your most-used Format command",
            "Your Find command usage is high - learn regex patterns to search more efficiently",
            "Debug efficiency could improve with better breakpoint strategies",
          ],
        };

        const analysisHTML = `
          <div style="background: white; padding: 20px; border-radius: 10px; max-width: 500px;">
            <h3>üìä Command Analysis Report</h3>
            <p><strong>üèÜ Top Command:</strong> ${analysis.topCommand}</p>
            <p><strong>‚ö° Overall Efficiency:</strong> ${
              analysis.efficiency
            }%</p>
            <p><strong>‚è±Ô∏è Weekly Time Saved:</strong> ${
              Math.round((analysis.weeklyTimeSaved / 60) * 100) / 100
            } hours</p>
            <h4>üí° Recommendations:</h4>
            <ul>
              ${analysis.recommendations
                .map((rec) => `<li>${rec}</li>`)
                .join("")}
            </ul>
            <button onclick="this.closest('.modal').remove()" style="margin-top: 15px; width: 100%;">Close</button>
          </div>
        `;
        showModal(analysisHTML);
      }

      // Enhanced Cloud Sync System
      let syncInterval;
      let isCloudConnected = false;

      function toggleCloudSync() {
        const statusDisplay = document.getElementById("syncStatusDisplay");
        const syncIcon = document.getElementById("syncIcon");
        const syncStatusText = document.getElementById("syncStatusText");
        const syncDetails = document.getElementById("syncDetails");
        const toggleBtn = document.getElementById("toggleSyncBtn");
        const manualSyncBtn = document.getElementById("manualSyncBtn");

        if (!isCloudConnected) {
          // Start connection simulation
          simulateCloudConnection();
        } else {
          // Disconnect
          isCloudConnected = false;
          clearInterval(syncInterval);

          statusDisplay.className = "sync-status-display";
          syncIcon.textContent = "‚è∏Ô∏è";
          syncStatusText.textContent = "Cloud Sync is OFF";
          syncDetails.textContent = "Connect to sync your data across devices";
          toggleBtn.textContent = "Connect Cloud";
          manualSyncBtn.disabled = true;

          showNotification("‚òÅÔ∏è Cloud sync disconnected");
        }
      }

      function simulateCloudConnection() {
        const progressContainer = document.getElementById(
          "syncProgressContainer"
        );
        const progressBar = document.getElementById("syncProgressBar");
        const progressText = document.getElementById("syncProgressText");

        progressContainer.style.display = "block";
        let progress = 0;

        const connectionInterval = setInterval(() => {
          progress += Math.random() * 15 + 5;
          progressBar.style.width = Math.min(progress, 100) + "%";

          if (progress < 30) {
            progressText.textContent = "Establishing secure connection...";
          } else if (progress < 60) {
            progressText.textContent = "Authenticating credentials...";
          } else if (progress < 90) {
            progressText.textContent = "Syncing data...";
          } else {
            progressText.textContent = "Finalizing connection...";
          }

          if (progress >= 100) {
            clearInterval(connectionInterval);
            completeCloudConnection();
          }
        }, 200);
      }

      function completeCloudConnection() {
        const statusDisplay = document.getElementById("syncStatusDisplay");
        const syncIcon = document.getElementById("syncIcon");
        const syncStatusText = document.getElementById("syncStatusText");
        const syncDetails = document.getElementById("syncDetails");
        const toggleBtn = document.getElementById("toggleSyncBtn");
        const manualSyncBtn = document.getElementById("manualSyncBtn");
        const progressContainer = document.getElementById(
          "syncProgressContainer"
        );

        setTimeout(() => {
          isCloudConnected = true;
          progressContainer.style.display = "none";

          statusDisplay.className = "sync-status-display connected";
          syncIcon.textContent = "‚úÖ";
          syncStatusText.textContent = "Cloud Sync is ACTIVE";
          syncDetails.textContent =
            "Last sync: just now ‚Ä¢ Next sync: in 15 minutes";
          toggleBtn.textContent = "Disconnect";
          manualSyncBtn.disabled = false;

          updateSyncStats();
          startAutoSync();

          showNotification("üéâ Cloud sync connected successfully!");
        }, 500);
      }

      function manualSync() {
        if (!isCloudConnected) return;

        const progressContainer = document.getElementById(
          "syncProgressContainer"
        );
        const progressBar = document.getElementById("syncProgressBar");
        const progressText = document.getElementById("syncProgressText");

        progressContainer.style.display = "block";
        progressBar.style.width = "0%";

        let progress = 0;
        const syncInterval = setInterval(() => {
          progress += Math.random() * 20 + 10;
          progressBar.style.width = Math.min(progress, 100) + "%";
          progressText.textContent = "Uploading data...";

          if (progress >= 100) {
            clearInterval(syncInterval);
            setTimeout(() => {
              progressContainer.style.display = "none";
              updateSyncStats();
              showNotification("üì§ Manual sync completed!");
            }, 500);
          }
        }, 100);
      }

      function startAutoSync() {
        syncInterval = setInterval(() => {
          if (isCloudConnected) {
            manualSync();
          }
        }, 15 * 60 * 1000); // 15 minutes
      }

      function updateSyncStats() {
        const now = new Date();
        document.getElementById("lastSyncTime").textContent =
          now.toLocaleTimeString();
        document.getElementById("syncSize").textContent = `${Math.round(
          Math.random() * 50 + 10
        )} KB`;
        document.getElementById("syncDevices").textContent =
          Math.floor(Math.random() * 3) + 1;
      }

      function exportData() {
        const data = {
          dailyHours: chartData.daily.current.hours,
          productivity: chartData.weekly.productivity,
          commands: commandsData.frequency.data,
          exportDate: new Date().toISOString(),
        };

        const blob = new Blob([JSON.stringify(data, null, 2)], {
          type: "application/json",
        });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `codeflow-data-${
          new Date().toISOString().split("T")[0]
        }.json`;
        a.click();
        URL.revokeObjectURL(url);

        showNotification("üì• Data exported successfully!");
      }

      function importData() {
        const input = document.createElement("input");
        input.type = "file";
        input.accept = ".json";
        input.onchange = (e) => {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
              try {
                const data = JSON.parse(e.target.result);
                // Simulate data import
                showNotification("üì§ Data imported successfully!");
              } catch (error) {
                showNotification("‚ùå Invalid file format");
              }
            };
            reader.readAsText(file);
          }
        };
        input.click();
      }

      // Enhanced API System
      let apiConnections = {};

      function saveAPI() {
        const key = document.getElementById("apiKey").value;
        const provider = document.getElementById("apiProvider").value;
        const status = document.getElementById("apiStatus");

        if (key.trim()) {
          localStorage.setItem(`codeflow_api_${provider}`, key);
          apiConnections[provider] = { key, status: "saved", lastTest: null };

          status.className = "api-status success";
          status.textContent = `‚úÖ ${
            provider.charAt(0).toUpperCase() + provider.slice(1)
          } API key saved successfully!`;

          updateAPIStats();
        } else {
          status.className = "api-status error";
          status.textContent = "‚ùå Please enter a valid API key";
        }
      }

      function testAPI() {
        const key = document.getElementById("apiKey").value;
        const provider = document.getElementById("apiProvider").value;
        const status = document.getElementById("apiStatus");

        if (!key.trim()) {
          status.className = "api-status error";
          status.textContent = "‚ùå Please enter an API key first";
          return;
        }

        status.className = "api-status info";
        status.textContent = "üß™ Testing API connection...";

        // Simulate API test
        setTimeout(() => {
          const success = Math.random() > 0.2; // 80% success rate

          if (success) {
            status.className = "api-status success";
            status.textContent = `üéâ ${
              provider.charAt(0).toUpperCase() + provider.slice(1)
            } API connection successful!`;
            apiConnections[provider] = {
              ...apiConnections[provider],
              status: "connected",
              lastTest: new Date().toISOString(),
            };
            updateAPIStats();
          } else {
            status.className = "api-status error";
            status.textContent =
              "‚ùå API connection failed. Check your key and permissions.";
          }
        }, 2000);
      }

      function configureProvider() {
        const provider = document.getElementById("apiProvider").value;
        const instructions = {
          github:
            "1. Go to GitHub.com ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens\n2. Generate new token with 'repo' and 'user' scopes\n3. Copy and paste the token above",
          gitlab:
            "1. Go to GitLab.com ‚Üí Preferences ‚Üí Access Tokens\n2. Create token with 'api' and 'read_user' scopes\n3. Copy and paste the token above",
          slack:
            "1. Go to api.slack.com ‚Üí Your Apps ‚Üí Create New App\n2. Install app to workspace and get OAuth token\n3. Copy and paste the token above",
        };

        const instruction =
          instructions[provider] ||
          "Please refer to the provider's documentation for API key generation.";
        alert(
          `${
            provider.charAt(0).toUpperCase() + provider.slice(1)
          } Setup:\n\n${instruction}`
        );
      }

      function testWebhook() {
        const url = document.getElementById("webhookUrl").value;
        const status = document.getElementById("apiStatus");

        if (!url.trim()) {
          status.className = "api-status error";
          status.textContent = "‚ùå Please enter a webhook URL";
          return;
        }

        status.className = "api-status info";
        status.textContent = "üì° Testing webhook...";

        setTimeout(() => {
          status.className = "api-status success";
          status.textContent = "‚úÖ Webhook test successful!";
        }, 1500);
      }

      function updateAPIStats() {
        const calls = Math.floor(Math.random() * 150 + 50);
        const latency = Math.floor(Math.random() * 200 + 100);

        document.getElementById("apiCalls").textContent = calls;
        document.getElementById("apiLatency").textContent = `${latency}ms`;
        document.getElementById("apiUptime").textContent = "üü¢ Online";
      }

      // Quick API Actions
      function fetchCommits() {
        showNotification("üîÑ Fetching latest commits...");
        setTimeout(() => {
          showNotification("‚úÖ Commits updated successfully!");
        }, 2000);
      }

      function updateRepoStats() {
        showNotification("üìä Updating repository statistics...");
        setTimeout(() => {
          showNotification("‚úÖ Repository stats updated!");
        }, 1500);
      }

      function sendTestNotification() {
        showNotification("üîî Test notification sent to configured channels!");
      }

      function validateConnections() {
        showNotification("üîç Validating all API connections...");
        setTimeout(() => {
          showNotification("‚úÖ All connections validated successfully!");
        }, 3000);
      }

      // Initialize enhanced features
      document.addEventListener("DOMContentLoaded", function () {
        initCommandsChart();
        updateCommandStats();
        updateAPIStats();

        // Load saved API keys
        const savedGitHub = localStorage.getItem("codeflow_api_github");
        if (savedGitHub) {
          document.getElementById("apiKey").value = savedGitHub;
          document.getElementById("apiStatus").className = "api-status success";
          document.getElementById("apiStatus").textContent =
            "‚úÖ GitHub API key loaded from storage";
        }
      });

      // Tracking Toggle
      const trackingToggle = document.getElementById("trackingToggle");
      const trackingStatus = document.getElementById("trackingStatus");
      trackingToggle.addEventListener("change", () => {
        trackingStatus.textContent = trackingToggle.checked
          ? "‚úÖ Smart Tracking is ON"
          : "‚ùå Tracking is OFF";
        trackingStatus.style.color = trackingToggle.checked
          ? "#10b981"
          : "#ef4444";
      });

      // Enhanced Timer System
      let timerInterval;
      let seconds = 0;
      let isRunning = false;
      let isPaused = false;
      let totalToday = parseInt(
        localStorage.getItem("totalTodaySeconds") || "0"
      );
      let sessionCount = parseInt(localStorage.getItem("sessionCount") || "0");
      let currentSessionStart = null;

      // Timer state management
      const timerDisplay = document.getElementById("timerDisplay");
      const timerMode = document.getElementById("timerMode");
      const startBtn = document.getElementById("startBtn");
      const pauseBtn = document.getElementById("pauseBtn");
      const stopBtn = document.getElementById("stopBtn");

      function updateTimerDisplay() {
        const hours = Math.floor(seconds / 3600);
        const minutes = Math.floor((seconds % 3600) / 60);
        const secs = seconds % 60;
        document.getElementById("timer").textContent = `${hours
          .toString()
          .padStart(2, "0")}:${minutes.toString().padStart(2, "0")}:${secs
          .toString()
          .padStart(2, "0")}`;
      }

      function updateStats() {
        const todayHours = Math.floor(totalToday / 3600);
        const todayMins = Math.floor((totalToday % 3600) / 60);
        document.getElementById(
          "todayTime"
        ).textContent = `${todayHours}h ${todayMins}m`;
        document.getElementById("sessionCount").textContent = sessionCount;

        // Update productivity score based on time and goals
        const productivity = Math.min(
          100,
          Math.floor((totalToday / 3600) * 20 + getCompletedGoals() * 25)
        );
        document.getElementById(
          "productivityScore"
        ).textContent = `${productivity}%`;
        document.getElementById(
          "productivityFill"
        ).style.width = `${productivity}%`;
      }

      function getCompletedGoals() {
        return document.querySelectorAll(".goal-checkbox.completed").length;
      }

      function startTimer() {
        if (!isRunning && !isPaused) {
          // Fresh start
          seconds = 0;
          currentSessionStart = Date.now();
          sessionCount++;
          localStorage.setItem("sessionCount", sessionCount.toString());
        }

        isRunning = true;
        isPaused = false;

        timerDisplay.classList.add("running");
        timerMode.textContent = "üî• Coding in Progress";

        startBtn.disabled = true;
        pauseBtn.disabled = false;
        stopBtn.disabled = false;

        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
          seconds++;
          totalToday++;
          updateTimerDisplay();
          updateStats();

          // Save progress
          localStorage.setItem("totalTodaySeconds", totalToday.toString());

          // Check for Pomodoro completion (25 minutes)
          if (seconds === 1500) {
            showTimerNotification(
              "üçÖ Pomodoro Complete! Take a 5-minute break."
            );
            document.getElementById("goal1").classList.add("completed");
          }
        }, 1000);
      }

      function pauseTimer() {
        if (isRunning) {
          clearInterval(timerInterval);
          isRunning = false;
          isPaused = true;

          timerDisplay.classList.remove("running");
          timerMode.textContent = "‚è∏Ô∏è Paused";

          startBtn.disabled = false;
          pauseBtn.disabled = true;

          startBtn.innerHTML = "‚ñ∂Ô∏è Resume";
        }
      }

      function stopTimer() {
        clearInterval(timerInterval);
        isRunning = false;
        isPaused = false;

        timerDisplay.classList.remove("running");
        timerMode.textContent = "‚úÖ Session Complete";

        startBtn.disabled = false;
        pauseBtn.disabled = true;
        stopBtn.disabled = true;

        startBtn.innerHTML = "‚ñ∂Ô∏è Start";

        // Show session summary
        if (seconds > 0) {
          const sessionMinutes = Math.floor(seconds / 60);
          showTimerNotification(
            `üéâ Session completed! You coded for ${sessionMinutes} minutes.`
          );
        }

        seconds = 0;
        updateTimerDisplay();
        updateStats();
      }

      function toggleGoal(goalId) {
        const goal = document.getElementById(goalId);
        goal.classList.toggle("completed");
        updateStats();

        if (goal.classList.contains("completed")) {
          showTimerNotification("üéØ Goal completed! Great job!");
        }
      }

      function showTimerNotification(message) {
        // Create or use existing notification
        let notification = document.getElementById("timer-notification");
        if (!notification) {
          notification = document.createElement("div");
          notification.id = "timer-notification";
          notification.style.cssText = `
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 1001;
            max-width: 300px;
          `;
          document.body.appendChild(notification);
        }

        notification.textContent = message;
        notification.style.transform = "translateX(0)";

        setTimeout(() => {
          notification.style.transform = "translateX(400px)";
        }, 4000);
      }

      // Initialize timer stats on load
      window.addEventListener("load", () => {
        updateStats();

        // Reset daily stats if it's a new day
        const lastDate = localStorage.getItem("lastActiveDate");
        const today = new Date().toDateString();
        if (lastDate !== today) {
          totalToday = 0;
          sessionCount = 0;
          localStorage.setItem("totalTodaySeconds", "0");
          localStorage.setItem("sessionCount", "0");
          localStorage.setItem("lastActiveDate", today);
          updateStats();
        }
      });

      // Cloud Sync
      function toggleCloudSync() {
        const cloudStatus = document.getElementById("cloudStatus");
        if (cloudStatus.textContent.includes("OFF")) {
          cloudStatus.textContent = "Cloud Sync is ON";
          cloudStatus.className = "status sync-on";
        } else {
          cloudStatus.textContent = "Cloud Sync is OFF";
          cloudStatus.className = "status sync-off";
        }
      }

      // API Config with localStorage
      function saveAPI() {
        const key = document.getElementById("apiKey").value;
        if (key.trim()) {
          localStorage.setItem("codeflow_api", key);
          document.getElementById("apiStatus").textContent =
            "‚úÖ API Key saved!";
        } else {
          document.getElementById("apiStatus").textContent =
            "‚ùå Please enter a valid key.";
        }
      }
      // Load API Key if saved
      window.onload = () => {
        const savedKey = localStorage.getItem("codeflow_api");
        if (savedKey) {
          document.getElementById("apiKey").value = savedKey;
          document.getElementById("apiStatus").textContent =
            "‚úÖ API Key loaded.";
        }
        // Initialize badge system
        initializeBadges();
      };

      // Enhanced Badge System
      const badgeData = {
        streak: {
          name: "Fire Streak",
          description: "Maintain daily coding streaks",
          levels: [5, 10, 15, 20, 30],
          rewards: ["Beginner", "Intermediate", "Advanced", "Expert", "Master"],
        },
        speed: {
          name: "Lightning Coder",
          description: "Code with impressive speed",
          levels: [100, 500, 1000, 2000, 5000],
          rewards: ["Quick", "Fast", "Rapid", "Lightning", "Supersonic"],
        },
        master: {
          name: "Code Master",
          description: "Master multiple programming languages",
          levels: [2, 3, 5, 8, 12],
          rewards: ["Learner", "Skilled", "Proficient", "Expert", "Master"],
        },
        night: {
          name: "Night Owl",
          description: "Late night coding sessions",
          levels: [10, 25, 50, 100, 200],
          rewards: [
            "Early Bird",
            "Night Worker",
            "Owl",
            "Night Master",
            "Legendary Owl",
          ],
        },
        bug: {
          name: "Bug Hunter",
          description: "Find and fix bugs efficiently",
          levels: [50, 150, 300, 500, 1000],
          rewards: [
            "Detector",
            "Hunter",
            "Exterminator",
            "Bug Master",
            "Legendary Hunter",
          ],
        },
        team: {
          name: "Team Player",
          description: "Collaborate effectively with others",
          levels: [2, 5, 10, 20, 50],
          rewards: [
            "Helper",
            "Collaborator",
            "Team Member",
            "Team Leader",
            "Team Master",
          ],
        },
      };

      function initializeBadges() {
        // Add notification container
        if (!document.querySelector(".notification")) {
          const notification = document.createElement("div");
          notification.className = "notification";
          notification.id = "achievement-notification";
          document.body.appendChild(notification);
        }

        // Initialize progress bar animations
        setTimeout(() => {
          document.querySelectorAll(".progress-bar").forEach((bar) => {
            const progress = bar.dataset.progress;
            bar.style.width = "0%";
            setTimeout(() => {
              bar.style.width = progress + "%";
            }, 100);
          });
        }, 500);
      }

      function showBadgeDetails(badgeType) {
        const badge = badgeData[badgeType];
        if (!badge) return;

        const modal = document.createElement("div");
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.8);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1002;
          animation: fadeIn 0.3s ease;
        `;

        modal.innerHTML = `
          <div style="
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 400px;
            text-align: center;
            position: relative;
          ">
            <button onclick="this.closest('.modal').remove()" style="
              position: absolute;
              top: 10px;
              right: 15px;
              background: none;
              border: none;
              font-size: 24px;
              cursor: pointer;
            ">√ó</button>
            <h2>${badge.name}</h2>
            <p>${badge.description}</p>
            <div style="margin: 20px 0;">
              <h4>Reward Levels:</h4>
              ${badge.levels
                .map(
                  (level, i) => `
                <div style="margin: 5px 0; padding: 8px; background: #f0f4f9; border-radius: 8px;">
                  Level ${i + 1}: ${level} ‚Üí ${badge.rewards[i]}
                </div>
              `
                )
                .join("")}
            </div>
            <button onclick="this.closest('.modal').remove()" style="margin-top: 15px;">Close</button>
          </div>
        `;

        modal.className = "modal";
        document.body.appendChild(modal);
      }

      function showNotification(message, duration = 3000) {
        const notification = document.getElementById(
          "achievement-notification"
        );
        notification.textContent = message;
        notification.classList.add("show");

        setTimeout(() => {
          notification.classList.remove("show");
        }, duration);
      }

      function simulateProgress() {
        const badges = document.querySelectorAll(".badge:not(.unlocked)");
        if (badges.length === 0) {
          showNotification("üéâ All badges unlocked!");
          return;
        }

        const randomBadge = badges[Math.floor(Math.random() * badges.length)];
        const progressBar = randomBadge.querySelector(".progress-bar");
        const currentProgress = parseInt(progressBar.dataset.progress) || 0;
        const newProgress = Math.min(
          100,
          currentProgress + Math.floor(Math.random() * 20) + 5
        );

        progressBar.dataset.progress = newProgress;
        progressBar.style.width = newProgress + "%";

        if (newProgress >= 100) {
          setTimeout(() => {
            randomBadge.classList.add("unlocked");
            showNotification(
              `üéâ Badge unlocked: ${
                randomBadge.querySelector(".badge-title").textContent
              }!`
            );

            // Add sparkle effect
            addSparkleEffect(randomBadge);
          }, 500);
        } else {
          showNotification(`üìà Progress updated: ${newProgress}%`);
        }
      }

      function unlockRandomBadge() {
        const lockedBadges = document.querySelectorAll(".badge:not(.unlocked)");
        if (lockedBadges.length === 0) {
          showNotification("üéâ All badges already unlocked!");
          return;
        }

        const randomBadge =
          lockedBadges[Math.floor(Math.random() * lockedBadges.length)];
        const progressBar = randomBadge.querySelector(".progress-bar");

        // Animate to 100%
        progressBar.style.width = "100%";
        progressBar.dataset.progress = "100";

        setTimeout(() => {
          randomBadge.classList.add("unlocked");
          const badgeTitle =
            randomBadge.querySelector(".badge-title").textContent;
          showNotification(`üéÅ Surprise unlock: ${badgeTitle}!`);

          // Add tier based on level
          const level = parseInt(randomBadge.dataset.level) || 1;
          if (level >= 20) {
            randomBadge.classList.add("legendary");
          } else if (level >= 10) {
            randomBadge.classList.add("epic");
          }

          addSparkleEffect(randomBadge);
        }, 800);
      }

      function addSparkleEffect(badge) {
        for (let i = 0; i < 6; i++) {
          const sparkle = document.createElement("div");
          sparkle.style.cssText = `
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ffd700;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 1s ease-out forwards;
            top: ${Math.random() * 100}%;
            left: ${Math.random() * 100}%;
          `;

          badge.style.position = "relative";
          badge.appendChild(sparkle);

          setTimeout(() => sparkle.remove(), 1000);
        }
      }

      // Auto progress simulation (optional)
      setInterval(() => {
        if (Math.random() < 0.1) {
          // 10% chance every 5 seconds
          const unlockedBadges = document.querySelectorAll(".badge.unlocked");
          if (unlockedBadges.length < 6) {
            // Randomly progress a badge
            simulateProgress();
          }
        }
      }, 5000);
    </script>
  </body>
</html>
