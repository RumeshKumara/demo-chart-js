<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CodeFlow Advanced Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, sans-serif;
        margin: 20px;
        background: #f0f4f9;
        color: #333;
      }
      h1 {
        text-align: center;
        margin-bottom: 30px;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
      }
      .card {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
      }
      .card:hover {
        transform: translateY(-3px);
      }
      .badges {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }
      .badge {
        background: linear-gradient(135deg, #fef3c7, #fed7aa);
        padding: 20px;
        text-align: center;
        border-radius: 16px;
        font-size: 16px;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        overflow: hidden;
      }
      .badge:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        border-color: #4a90e2;
      }
      .badge.unlocked {
        background: linear-gradient(135deg, #10b981, #34d399);
        color: white;
        animation: badgeUnlock 0.6s ease-out;
      }
      .badge.legendary {
        background: linear-gradient(135deg, #8b5cf6, #a78bfa);
        color: white;
        box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
      }
      .badge.epic {
        background: linear-gradient(135deg, #f59e0b, #fbbf24);
        color: white;
      }
      .badge-icon {
        font-size: 2rem;
        display: block;
        margin-bottom: 8px;
        animation: pulse 2s infinite;
      }
      .badge-title {
        font-weight: bold;
        font-size: 0.9rem;
        margin-bottom: 5px;
      }
      .badge-description {
        font-size: 0.75rem;
        opacity: 0.8;
        margin-bottom: 10px;
      }
      .progress {
        height: 12px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        margin-top: 10px;
        overflow: hidden;
        position: relative;
      }
      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #4a90e2, #67c1f5);
        border-radius: 8px;
        transition: width 0.8s ease-out;
        position: relative;
        overflow: hidden;
      }
      .progress-bar::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmer 2s infinite;
      }
      .badge-level {
        position: absolute;
        top: 5px;
        right: 5px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border-radius: 12px;
        padding: 2px 8px;
        font-size: 0.7rem;
        font-weight: bold;
      }
      .badge-tooltip {
        position: absolute;
        bottom: 110%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 0.8rem;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s;
        z-index: 1000;
      }
      .badge:hover .badge-tooltip {
        opacity: 1;
      }
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #10b981, #34d399);
        color: white;
        padding: 15px 20px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        transform: translateX(400px);
        transition: transform 0.5s ease;
        z-index: 1001;
      }
      .notification.show {
        transform: translateX(0);
      }
      @keyframes badgeUnlock {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }
      @keyframes shimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }
      @keyframes sparkle {
        0%,
        100% {
          opacity: 0;
          transform: scale(0);
        }
        50% {
          opacity: 1;
          transform: scale(1);
        }
      }
      button,
      input[type="text"],
      input[type="checkbox"] {
        padding: 10px 15px;
        border-radius: 8px;
        border: 1px solid #ccc;
        cursor: pointer;
        font-size: 14px;
      }
      button {
        background: linear-gradient(90deg, #4a90e2, #67c1f5);
        color: white;
        border: none;
      }
      button:hover {
        opacity: 0.9;
      }
      .status {
        margin-top: 10px;
        font-weight: bold;
      }
      .sync-on {
        color: green;
      }
      .sync-off {
        color: red;
      }
      .timer {
        font-size: 1.5rem;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <h1>‚ö° CodeFlow Advanced Dashboard</h1>

    <div class="grid">
      <!-- Daily Coding Hours Chart -->
      <div class="card">
        <h2>üìÖ Daily Coding Hours</h2>
        <canvas id="dailyHoursChart"></canvas>
      </div>

      <!-- Weekly Report -->
      <div class="card">
        <h2>üìä Weekly Productivity Trend</h2>
        <canvas id="weeklyChart"></canvas>
      </div>

      <!-- Top Commands -->
      <div class="card">
        <h2>‚å®Ô∏è Top Commands</h2>
        <canvas id="commandsChart"></canvas>
      </div>

      <!-- Tracking + Timer -->
      <div class="card">
        <h2>‚è±Ô∏è Tracking</h2>
        <label>
          <input type="checkbox" id="trackingToggle" /> Enable Tracking
        </label>
        <p id="trackingStatus">Tracking is OFF</p>
        <button onclick="startTimer()">Start Coding Session</button>
        <button onclick="stopTimer()">Stop</button>
        <div class="timer" id="timer">00:00:00</div>
      </div>

      <!-- Badges -->
      <div class="card">
        <h2>üèÖ Earned Badges & Achievements</h2>
        <div class="badges">
          <div
            class="badge unlocked"
            data-level="15"
            onclick="showBadgeDetails('streak')"
          >
            <span class="badge-level">Lv.15</span>
            <span class="badge-icon">üî•</span>
            <div class="badge-title">Fire Streak</div>
            <div class="badge-description">15 days coding streak</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 80%"
                data-progress="80"
              ></div>
            </div>
            <div class="badge-tooltip">
              Next: 20 day streak for Master level!
            </div>
          </div>

          <div
            class="badge epic unlocked"
            data-level="8"
            onclick="showBadgeDetails('speed')"
          >
            <span class="badge-level">Lv.8</span>
            <span class="badge-icon">‚ö°</span>
            <div class="badge-title">Lightning Coder</div>
            <div class="badge-description">1000+ lines per day</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 60%"
                data-progress="60"
              ></div>
            </div>
            <div class="badge-tooltip">
              Epic tier achieved! Next: Legendary at Lv.10
            </div>
          </div>

          <div
            class="badge"
            data-level="3"
            onclick="showBadgeDetails('master')"
          >
            <span class="badge-level">Lv.3</span>
            <span class="badge-icon">üèÜ</span>
            <div class="badge-title">Code Master</div>
            <div class="badge-description">Master 5 languages</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 40%"
                data-progress="40"
              ></div>
            </div>
            <div class="badge-tooltip">Learn 2 more languages to unlock!</div>
          </div>

          <div
            class="badge legendary unlocked"
            data-level="25"
            onclick="showBadgeDetails('night')"
          >
            <span class="badge-level">Lv.25</span>
            <span class="badge-icon">üåô</span>
            <div class="badge-title">Night Owl</div>
            <div class="badge-description">100 late night sessions</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 100%"
                data-progress="100"
              ></div>
            </div>
            <div class="badge-tooltip">Legendary achievement unlocked!</div>
          </div>

          <div
            class="badge unlocked"
            data-level="12"
            onclick="showBadgeDetails('bug')"
          >
            <span class="badge-level">Lv.12</span>
            <span class="badge-icon">üêõ</span>
            <div class="badge-title">Bug Hunter</div>
            <div class="badge-description">Fixed 500+ bugs</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 90%"
                data-progress="90"
              ></div>
            </div>
            <div class="badge-tooltip">
              Almost at Epic tier! 50 more bugs to go
            </div>
          </div>

          <div class="badge" data-level="1" onclick="showBadgeDetails('team')">
            <span class="badge-level">Lv.1</span>
            <span class="badge-icon">üë•</span>
            <div class="badge-title">Team Player</div>
            <div class="badge-description">Collaborate on projects</div>
            <div class="progress">
              <div
                class="progress-bar"
                style="width: 20%"
                data-progress="20"
              ></div>
            </div>
            <div class="badge-tooltip">Join more collaborative projects!</div>
          </div>
        </div>

        <div style="margin-top: 20px; text-align: center">
          <button onclick="simulateProgress()" style="margin-right: 10px">
            üéØ Simulate Progress
          </button>
          <button onclick="unlockRandomBadge()">üéÅ Random Unlock</button>
        </div>
      </div>

      <!-- Cloud Sync -->
      <div class="card">
        <h2>‚òÅÔ∏è Cloud Sync</h2>
        <button onclick="toggleCloudSync()">Toggle Cloud Sync</button>
        <p id="cloudStatus" class="status sync-off">Cloud Sync is OFF</p>
      </div>

      <!-- API Config -->
      <div class="card">
        <h2>‚öôÔ∏è Configure API</h2>
        <input type="text" id="apiKey" placeholder="Enter API Key" />
        <button onclick="saveAPI()">Save Key</button>
        <p id="apiStatus"></p>
      </div>
    </div>

    <script>
      // Daily Coding Hours Chart (Bar Chart)
      new Chart(document.getElementById("dailyHoursChart"), {
        type: "bar",
        data: {
          labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
          datasets: [
            {
              label: "Hours Worked",
              data: [4, 6, 5, 7, 3, 2, 4], // Example data
              backgroundColor: "#4a90e2",
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              title: { display: true, text: "Hours" },
            },
            x: {
              title: { display: true, text: "Days" },
            },
          },
        },
      });

      // Weekly Productivity Line Chart
      new Chart(document.getElementById("weeklyChart"), {
        type: "line",
        data: {
          labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
          datasets: [
            {
              label: "Productivity Score",
              data: [70, 85, 60, 90, 75, 50, 65],
              borderColor: "#67c1f5",
              backgroundColor: "rgba(103,193,245,0.2)",
              fill: true,
              tension: 0.3,
            },
          ],
        },
      });

      // Top Commands Chart
      new Chart(document.getElementById("commandsChart"), {
        type: "doughnut",
        data: {
          labels: ["Format", "Save", "Run", "Debug", "Refactor"],
          datasets: [
            {
              data: [20, 15, 10, 8, 5],
              backgroundColor: [
                "#4a90e2",
                "#67c1f5",
                "#50e3c2",
                "#f5a623",
                "#d0021b",
              ],
            },
          ],
        },
      });

      // Tracking Toggle
      const trackingToggle = document.getElementById("trackingToggle");
      const trackingStatus = document.getElementById("trackingStatus");
      trackingToggle.addEventListener("change", () => {
        trackingStatus.textContent = trackingToggle.checked
          ? "Tracking is ON"
          : "Tracking is OFF";
      });

      // Timer
      let timerInterval,
        seconds = 0;
      function startTimer() {
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
          seconds++;
          document.getElementById("timer").textContent = new Date(
            seconds * 1000
          )
            .toISOString()
            .substr(11, 8);
        }, 1000);
      }
      function stopTimer() {
        clearInterval(timerInterval);
      }

      // Cloud Sync
      function toggleCloudSync() {
        const cloudStatus = document.getElementById("cloudStatus");
        if (cloudStatus.textContent.includes("OFF")) {
          cloudStatus.textContent = "Cloud Sync is ON";
          cloudStatus.className = "status sync-on";
        } else {
          cloudStatus.textContent = "Cloud Sync is OFF";
          cloudStatus.className = "status sync-off";
        }
      }

      // API Config with localStorage
      function saveAPI() {
        const key = document.getElementById("apiKey").value;
        if (key.trim()) {
          localStorage.setItem("codeflow_api", key);
          document.getElementById("apiStatus").textContent =
            "‚úÖ API Key saved!";
        } else {
          document.getElementById("apiStatus").textContent =
            "‚ùå Please enter a valid key.";
        }
      }
      // Load API Key if saved
      window.onload = () => {
        const savedKey = localStorage.getItem("codeflow_api");
        if (savedKey) {
          document.getElementById("apiKey").value = savedKey;
          document.getElementById("apiStatus").textContent =
            "‚úÖ API Key loaded.";
        }
        // Initialize badge system
        initializeBadges();
      };

      // Enhanced Badge System
      const badgeData = {
        streak: {
          name: "Fire Streak",
          description: "Maintain daily coding streaks",
          levels: [5, 10, 15, 20, 30],
          rewards: ["Beginner", "Intermediate", "Advanced", "Expert", "Master"],
        },
        speed: {
          name: "Lightning Coder",
          description: "Code with impressive speed",
          levels: [100, 500, 1000, 2000, 5000],
          rewards: ["Quick", "Fast", "Rapid", "Lightning", "Supersonic"],
        },
        master: {
          name: "Code Master",
          description: "Master multiple programming languages",
          levels: [2, 3, 5, 8, 12],
          rewards: ["Learner", "Skilled", "Proficient", "Expert", "Master"],
        },
        night: {
          name: "Night Owl",
          description: "Late night coding sessions",
          levels: [10, 25, 50, 100, 200],
          rewards: [
            "Early Bird",
            "Night Worker",
            "Owl",
            "Night Master",
            "Legendary Owl",
          ],
        },
        bug: {
          name: "Bug Hunter",
          description: "Find and fix bugs efficiently",
          levels: [50, 150, 300, 500, 1000],
          rewards: [
            "Detector",
            "Hunter",
            "Exterminator",
            "Bug Master",
            "Legendary Hunter",
          ],
        },
        team: {
          name: "Team Player",
          description: "Collaborate effectively with others",
          levels: [2, 5, 10, 20, 50],
          rewards: [
            "Helper",
            "Collaborator",
            "Team Member",
            "Team Leader",
            "Team Master",
          ],
        },
      };

      function initializeBadges() {
        // Add notification container
        if (!document.querySelector(".notification")) {
          const notification = document.createElement("div");
          notification.className = "notification";
          notification.id = "achievement-notification";
          document.body.appendChild(notification);
        }

        // Initialize progress bar animations
        setTimeout(() => {
          document.querySelectorAll(".progress-bar").forEach((bar) => {
            const progress = bar.dataset.progress;
            bar.style.width = "0%";
            setTimeout(() => {
              bar.style.width = progress + "%";
            }, 100);
          });
        }, 500);
      }

      function showBadgeDetails(badgeType) {
        const badge = badgeData[badgeType];
        if (!badge) return;

        const modal = document.createElement("div");
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.8);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1002;
          animation: fadeIn 0.3s ease;
        `;

        modal.innerHTML = `
          <div style="
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 400px;
            text-align: center;
            position: relative;
          ">
            <button onclick="this.closest('.modal').remove()" style="
              position: absolute;
              top: 10px;
              right: 15px;
              background: none;
              border: none;
              font-size: 24px;
              cursor: pointer;
            ">√ó</button>
            <h2>${badge.name}</h2>
            <p>${badge.description}</p>
            <div style="margin: 20px 0;">
              <h4>Reward Levels:</h4>
              ${badge.levels
                .map(
                  (level, i) => `
                <div style="margin: 5px 0; padding: 8px; background: #f0f4f9; border-radius: 8px;">
                  Level ${i + 1}: ${level} ‚Üí ${badge.rewards[i]}
                </div>
              `
                )
                .join("")}
            </div>
            <button onclick="this.closest('.modal').remove()" style="margin-top: 15px;">Close</button>
          </div>
        `;

        modal.className = "modal";
        document.body.appendChild(modal);
      }

      function showNotification(message, duration = 3000) {
        const notification = document.getElementById(
          "achievement-notification"
        );
        notification.textContent = message;
        notification.classList.add("show");

        setTimeout(() => {
          notification.classList.remove("show");
        }, duration);
      }

      function simulateProgress() {
        const badges = document.querySelectorAll(".badge:not(.unlocked)");
        if (badges.length === 0) {
          showNotification("üéâ All badges unlocked!");
          return;
        }

        const randomBadge = badges[Math.floor(Math.random() * badges.length)];
        const progressBar = randomBadge.querySelector(".progress-bar");
        const currentProgress = parseInt(progressBar.dataset.progress) || 0;
        const newProgress = Math.min(
          100,
          currentProgress + Math.floor(Math.random() * 20) + 5
        );

        progressBar.dataset.progress = newProgress;
        progressBar.style.width = newProgress + "%";

        if (newProgress >= 100) {
          setTimeout(() => {
            randomBadge.classList.add("unlocked");
            showNotification(
              `üéâ Badge unlocked: ${
                randomBadge.querySelector(".badge-title").textContent
              }!`
            );

            // Add sparkle effect
            addSparkleEffect(randomBadge);
          }, 500);
        } else {
          showNotification(`üìà Progress updated: ${newProgress}%`);
        }
      }

      function unlockRandomBadge() {
        const lockedBadges = document.querySelectorAll(".badge:not(.unlocked)");
        if (lockedBadges.length === 0) {
          showNotification("üéâ All badges already unlocked!");
          return;
        }

        const randomBadge =
          lockedBadges[Math.floor(Math.random() * lockedBadges.length)];
        const progressBar = randomBadge.querySelector(".progress-bar");

        // Animate to 100%
        progressBar.style.width = "100%";
        progressBar.dataset.progress = "100";

        setTimeout(() => {
          randomBadge.classList.add("unlocked");
          const badgeTitle =
            randomBadge.querySelector(".badge-title").textContent;
          showNotification(`üéÅ Surprise unlock: ${badgeTitle}!`);

          // Add tier based on level
          const level = parseInt(randomBadge.dataset.level) || 1;
          if (level >= 20) {
            randomBadge.classList.add("legendary");
          } else if (level >= 10) {
            randomBadge.classList.add("epic");
          }

          addSparkleEffect(randomBadge);
        }, 800);
      }

      function addSparkleEffect(badge) {
        for (let i = 0; i < 6; i++) {
          const sparkle = document.createElement("div");
          sparkle.style.cssText = `
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ffd700;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 1s ease-out forwards;
            top: ${Math.random() * 100}%;
            left: ${Math.random() * 100}%;
          `;

          badge.style.position = "relative";
          badge.appendChild(sparkle);

          setTimeout(() => sparkle.remove(), 1000);
        }
      }

      // Auto progress simulation (optional)
      setInterval(() => {
        if (Math.random() < 0.1) {
          // 10% chance every 5 seconds
          const unlockedBadges = document.querySelectorAll(".badge.unlocked");
          if (unlockedBadges.length < 6) {
            // Randomly progress a badge
            simulateProgress();
          }
        }
      }, 5000);
    </script>
  </body>
</html>
